(window.webpackJsonp=window.webpackJsonp||[]).push([[247,134],{641:function(t,e,n){"use strict";n.r(e);var o={props:["links","paging","category"],data:function(){return{laquo:"<i class='fa-solid fa-chevron-left'></i>",raquo:"<i class='fa-solid fa-chevron-right'></i>",keywords:this.$route.query.keywords}},methods:{fetchAllData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.keywords,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.category_id;this.$emit("fetch-data",t,e,n,o)}}},l=o,r=n(8),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("nav",{attrs:{"aria-label":"Page navigation example z-0"}},[e("ul",{staticClass:"flex flex-wrap list-style-none"},t._l(t.links,(function(link,n){return e("div",{key:n},["&laquo; Previous"===link.label?e("li",{staticClass:"page-item"},[e("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded  ".concat(t.paging.current>1?"cursor-pointer text-white bg-blueGray-800":"pointer-events-none text-blueGray-800"," focus:shadow-none"),attrs:{tabindex:"-1","aria-disabled":"true"},domProps:{innerHTML:t._s(t.laquo)},on:{click:function(e){t.fetchAllData(t.paging.current-=1)}}})]):link.active?e("li",{staticClass:"page-item active"},[e("a",{class:"page-link relative block py-1.5 px-3 border-0 outline-none transition-all duration-300 rounded hover:text-white hover:bg-blueGray-800 shadow-md focus:shadow-md ".concat(link.active?"pointer-events-none text-white bg-blueGray-800":"cursor-pointer text-blueGray-900"),on:{click:function(e){t.fetchAllData(parseInt(link.label))}}},[t._v(t._s(link.label))])]):"Next &raquo;"===link.label?e("li",{class:"page-item ".concat(t.paging.current===t.paging.last?"disabled":"")},[e("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded text-white hover:text-gray-800 hover:bg-gray-200 focus:shadow-none ".concat(t.paging.current===t.paging.last?"pointer-events-none text-blueGray-800":"cursor-pointer text-white bg-blueGray-800"),domProps:{innerHTML:t._s(t.raquo)},on:{click:function(e){t.fetchAllData(t.paging.current+=1)}}})]):e("li",{staticClass:"page-item"},[e("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded text-blueGray-900 font-semibold hover:text-blueGray-700 hover:bg-blueGray-800 focus:shadow-none ".concat(link.active?"pointer-events-none":"cursor-pointer"),on:{click:function(e){t.fetchAllData(parseInt(link.label))}}},[t._v(t._s(link.label))])])])})),0)])}),[],!1,null,null,null);e.default=component.exports},845:function(t,e,n){"use strict";n.r(e);var o=n(150),l=(n(53),n(18)),r=(n(69),n(37),n(311),n(36),n(42),n(15),n(25),n(637)),c=[{id:1,title:"tanggal"},{id:3,title:"jenis"},{id:5,title:"pendapatan"},{id:6,title:"pengeluaran"},{id:7,title:"pelanggan / supplier"}],d={name:"laporan-cash-flow",layout:"admin",data:function(){return{showModalLaporanCashFlow:!1,selectedPerusahaan:null,perusahaans:[],start_date:null,end_date:null,current:this.$route.query.current,loading:null,options:"",success:null,message_success:"",headers:Object(o.a)(c),api_url:"https://sirmuh.api.dksindo.com/api/v1",api_token:"JSILKPJ7oVawvw48p7MicoYUcDYf5g8u",server_url:"https://sirmuh.api.dksindo.com",items:[],links:[],paging:{current:null,from:null,last:null,per_page:null,total:null}}},beforeMount:function(){this.authTokenStorage()},created:function(){this.checkNewData()},mounted:function(){this.getPerusahaanLists(),this.getDataLaporanCashFlow(1,{}),this.checkUserLogin()},methods:{handleFilterCashFlow:function(param,t){"laporan-cash-flow"===t&&(param.start_date&&param.end_date||param.start_date||param.end_date?(this.start_date=param.start_date,this.end_date=param.end_date,this.$router.push({path:"/dashboard/laporan/kas/cash-flow",query:{start_date:param.start_date,end_date:param.end_date}})):this.$router.push("/dashboard/laporan/kas/cash-flow"),this.getDataLaporanCashFlow(1,param))},changePerusahaan:function(t){var e=t.id;if(void 0!==e){var n="".concat(this.server_url,"/laporan/kas/cash-flow/").concat(e,"/").concat(this.start_date,"/").concat(this.end_date);window.open(n,"_blank"),this.showModalLaporanCashFlow=!this.showModalLaporanCashFlow,this.selectedPerusahaan=null,this.$nuxt.startDownload=!1}},getDataLaporanCashFlow:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,param=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,this.$nuxt.globalLoadingMessage="Proses menyiapkan data laporan pembelian periode ...";var n=this.$route.query.start_date,o=this.$route.query.end_date,l="".concat(this.api_url,"/laporan-cash-flow?page=").concat(e,"&start_date=").concat(param.start_date?param.start_date:n,"&end_date=").concat(param.end_date?param.end_date:o);Object(r.b)({api_url:l,token:this.token.token,api_key:"JSILKPJ7oVawvw48p7MicoYUcDYf5g8u"}).then((function(data){var e,n,o,l,r,c,d,h=[];null!=data&&data.success&&(null==data||null===(e=data.data)||void 0===e||e.map((function(t){var e,n,o,l,r,c,d={tanggal:null==t||null===(e=t.data)||void 0===e?void 0:e.tanggal,kode:null==t||null===(n=t.data)||void 0===n?void 0:n.kode,jenis_data:null==t||null===(o=t.data)||void 0===o?void 0:o.jenis_data,nama_biaya:null==t||null===(l=t.data)||void 0===l?void 0:l.nama_biaya,kategori:null,pemasukan:isNaN(null==t?void 0:t.total_pemasukan)?0:null==t?void 0:t.total_pemasukan,pengeluaran:isNaN(null==t?void 0:t.total_pengeluaran)?0:null==t?void 0:t.total_pengeluaran,pelanggan:null==t||null===(r=t.data)||void 0===r?void 0:r.pelanggan,supplier:null==t||null===(c=t.data)||void 0===c?void 0:c.supplier};h.push(d)})),t.items=[].concat(h),t.links=null==data||null===(n=data.meta)||void 0===n?void 0:n.links,t.paging.current=Number(null==data||null===(o=data.meta)||void 0===o?void 0:o.current_page),t.paging.from=Number(null==data||null===(l=data.meta)||void 0===l?void 0:l.from),t.paging.last=Number(null==data||null===(r=data.meta)||void 0===r?void 0:r.last_page),t.paging.per_page=Number(null==data||null===(c=data.meta)||void 0===c?void 0:c.per_page),t.paging.total=Number(null==data||null===(d=data.meta)||void 0===d?void 0:d.total),setTimeout((function(){t.loading=!1}),500))})).catch((function(t){return console.log(t)}))},downloadData:function(t){t&&(this.showModalLaporanCashFlow=!0)},deletePelanggan:function(t){var e=this;this.loading=!0,this.options="delete-pemasukan",deleteData({api_url:"".concat(this.api_url,"/laporan-pembelian-periode/").concat(t),token:this.token.token,api_key:"JSILKPJ7oVawvw48p7MicoYUcDYf5g8u"}).then((function(data){data.success&&(e.message_success=data.message,e.success=!0,e.scrollToTop(),setTimeout((function(){e.loading=!1,e.options=""}),1500))})).catch((function(t){return console.log(t)}))},closeSuccessAlert:function(){this.success=!1,this.message=""},transformPerusahaanLists:function(t){return t.filter((function(t){return t&&t.id})).map((function(t){return{id:t.id,text:t.name}}))},getPerusahaanLists:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(){var n,o,l,c,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=1,l=1;case 3:if(!(o<=l)){e.next=12;break}return e.next=6,Object(r.b)({api_url:"".concat(t.api_url,"/data-perusahaan?page=").concat(o),token:t.token.token,api_key:t.api_token});case 6:data=e.sent,n=n.concat(null==data?void 0:data.data),l=null==data||null===(c=data.meta)||void 0===c?void 0:c.last_page,o++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n().then((function(data){t.perusahaans=t.transformPerusahaanLists(data)})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},toggleModal:function(){this.showModalLaporanCashFlow=!this.showModalLaporanCashFlow}},computed:{token:function(){return this.$store.getters["auth/getAuthToken"]}},watch:{notifs:function(){this.$_.size(this.$nuxt.notifs)>0&&this.getDataLaporanCashFlow(this.paging.current)}}},h=d,f=n(8),component=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-wrap mt-4"},[e("div",{class:"".concat(t.$nuxt.showSidebar?"w-full mb-12 px-12":"max-w-full")},[e("cards-card-table",{attrs:{color:"light",title:"DATA LAPORAN CASH FLOW",types:"laporan-cash-flow",queryType:"DATA_LAPORAN_CASH_FLOW",queryMiddle:"laporan-cash-flow",tableSetting:"laporan",headers:t.headers,columns:t.items,loading:t.loading,success:t.success,messageAlert:t.message_success},on:{"filter-data":t.handleFilterCashFlow,"close-alert":t.closeSuccessAlert,"deleted-data":t.deletePelanggan,"download-data":t.downloadData}}),t._v(" "),e("div",{staticClass:"mt-6 -mb-2"},[e("div",{staticClass:"flex justify-center items-center"},[e("molecules-pagination",{attrs:{links:t.links,paging:t.paging},on:{"fetch-data":t.getDataLaporanCashFlow}})],1)])],1),t._v(" "),e("div",{staticClass:"w-full"},[t.showModalLaporanCashFlow?e("div",[e("div",{staticClass:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"},[e("div",{staticClass:"relative w-96 my-6 mx-auto max-w-sm"},[e("div",{staticClass:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"},[e("div",{staticClass:"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t"},[e("button",{staticClass:"p-1 ml-auto border-0 text-black float-right text-3xl leading-none font-semibold",on:{click:function(e){return t.toggleModal()}}},[t._m(0)])]),t._v(" "),e("div",{staticClass:"relative p-6 flex-auto"},[e("div",[e("Select2",{attrs:{settings:{allowClear:!0,dropdownCss:{top:"auto",bottom:"auto"}},options:[{id:null,text:"Pilih Perusahaan"}].concat(Object(o.a)(t.perusahaans)),placeholder:"Pilih Perusahaan"},on:{change:function(e){return t.changePerusahaan(e)},select:function(e){return t.changePerusahaan(e)}},model:{value:t.selectedPerusahaan,callback:function(e){t.selectedPerusahaan=e},expression:"selectedPerusahaan"}})],1)])])])]),t._v(" "),t.showModalLaporanCashFlow?e("div",{staticClass:"opacity-25 fixed inset-0 z-40 bg-black"}):t._e()]):t._e()])])}),[function(){var t=this._self._c;return t("span",{staticClass:"text-black h-6 w-6 text-2xl block"},[t("i",{staticClass:"fa-solid fa-xmark text-lg"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{CardsCardTable:n(674).default,MoleculesPagination:n(641).default})}}]);