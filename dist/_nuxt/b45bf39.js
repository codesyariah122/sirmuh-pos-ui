(window.webpackJsonp=window.webpackJsonp||[]).push([[227,140],{675:function(e,t,n){"use strict";n.r(t);var r={props:["links","paging","category"],data:function(){return{laquo:"<i class='fa-solid fa-chevron-left'></i>",raquo:"<i class='fa-solid fa-chevron-right'></i>",keywords:this.$route.query.keywords}},methods:{fetchAllData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.keywords,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.category_id;this.$emit("fetch-data",e,t,n,r)}}},o=r,l=n(8),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("nav",{attrs:{"aria-label":"Page navigation example z-0"}},[t("ul",{staticClass:"flex flex-wrap list-style-none"},e._l(e.links,(function(link,n){return t("div",{key:n},["&laquo; Previous"===link.label?t("li",{staticClass:"page-item"},[t("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded  ".concat(e.paging.current>1?"cursor-pointer text-white bg-blueGray-800":"pointer-events-none text-blueGray-800"," focus:shadow-none"),attrs:{tabindex:"-1","aria-disabled":"true"},domProps:{innerHTML:e._s(e.laquo)},on:{click:function(t){e.fetchAllData(e.paging.current-=1)}}})]):link.active?t("li",{staticClass:"page-item active"},[t("a",{class:"page-link relative block py-1.5 px-3 border-0 outline-none transition-all duration-300 rounded hover:text-white hover:bg-blueGray-800 shadow-md focus:shadow-md ".concat(link.active?"pointer-events-none text-white bg-blueGray-800":"cursor-pointer text-blueGray-900"),on:{click:function(t){e.fetchAllData(parseInt(link.label))}}},[e._v(e._s(link.label))])]):"Next &raquo;"===link.label?t("li",{class:"page-item ".concat(e.paging.current===e.paging.last?"disabled":"")},[t("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded text-white hover:text-gray-800 hover:bg-gray-200 focus:shadow-none ".concat(e.paging.current===e.paging.last?"pointer-events-none text-blueGray-800":"cursor-pointer text-white bg-blueGray-800"),domProps:{innerHTML:e._s(e.raquo)},on:{click:function(t){e.fetchAllData(e.paging.current+=1)}}})]):t("li",{staticClass:"page-item"},[t("a",{class:"page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded text-blueGray-900 font-semibold hover:text-blueGray-700 hover:bg-blueGray-800 focus:shadow-none ".concat(link.active?"pointer-events-none":"cursor-pointer"),on:{click:function(t){e.fetchAllData(parseInt(link.label))}}},[e._v(e._s(link.label))])])])})),0)])}),[],!1,null,null,null);t.default=component.exports},860:function(e,t,n){e.exports=n.p+"img/robot-vector.2ab4d70.webp"},921:function(e,t,n){"use strict";n.r(t);var r=n(152),o=n(18),l=(n(70),n(344),n(53),n(15),n(43),n(44),n(30),n(25),n(37),n(670)),c={name:"history-programm",layout:"admin",data:function(){return{current:this.$route.query.current,image_url:"https://sirmuh.api.dksindo.com",loading:null,options:"",success:null,message_success:"",headers:[],api_url:"https://sirmuh.api.dksindo.com/api/v1",items:[],links:[],paging:{current:null,from:null,last:null,per_page:null,total:null}}},created:function(){this.checkNewData()},mounted:function(){this.getHistoryProgramm(this.current?Number(this.current):1,{},!0)},methods:{handleFilterBarang:function(param,e){"data-history"===e&&this.getHistoryProgramm(1,param,!1)},getHistoryProgramm:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function c(){var d,h,m,data,v,f,y,k,x,w,_,P;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:{},h=e.length>2?e[2]:void 0,t.loading=h,t.$nuxt.globalLoadingMessage="Proses menyiapkan history programm ...",m="".concat(t.api_url,"/history-programm").concat(d?"?page="+d:""),c.prev=6,c.next=9,Object(l.b)({api_url:m,token:t.token.token,api_key:"JSILKPJ7oVawvw48p7MicoYUcDYf5g8u"});case 9:if(null==(data=c.sent)||!data.success){c.next=22;break}return c.next=13,Promise.all(null==data||null===(v=data.data)||void 0===v?void 0:v.map(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t.image_url,"/").concat(null==r?void 0:r.photo),e.next=3,t.checkImageAvailability(o);case 3:return l=e.sent,e.abrupt("return",{id:null==r?void 0:r.id,tanggal:null==r?void 0:r.tanggal,user:null==r?void 0:r.user,keterangan:null==r?void 0:r.keterangan,routes:null==r?void 0:r.routes,route_name:null==r?void 0:r.route_name,name:null==r?void 0:r.name,photo:l?o:n(860)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:P=c.sent,t.items=Object(r.a)(P),t.links=null==data||null===(f=data.meta)||void 0===f?void 0:f.links,t.paging.current=null==data||null===(y=data.meta)||void 0===y?void 0:y.current_page,t.paging.from=null==data||null===(k=data.meta)||void 0===k?void 0:k.from,t.paging.last=null==data||null===(x=data.meta)||void 0===x?void 0:x.last_page,t.paging.per_page=null==data||null===(w=data.meta)||void 0===w?void 0:w.per_page,t.paging.total=null==data||null===(_=data.meta)||void 0===_?void 0:_.total,setTimeout((function(){t.loading=!1}),500);case 22:c.next=27;break;case 24:c.prev=24,c.t0=c.catch(6),console.log(c.t0);case 27:case"end":return c.stop()}}),c,null,[[6,24]])})))()},checkImageAvailability:function(e){return new Promise((function(t){var img=new Image;img.onload=function(){return t(!0)},img.onerror=function(){return t(!1)},img.src=e}))},deleteHistory:function(e){var t=this;this.loading=!0,this.options="delete-history",Object(l.a)({api_url:"".concat(this.api_url,"/data-history/").concat(e),token:this.token.token,api_key:"JSILKPJ7oVawvw48p7MicoYUcDYf5g8u"}).then((function(data){data.success&&(t.message_success=data.message,t.success=!0,t.scrollToTop(),setTimeout((function(){t.loading=!1,t.options=""}),1500))})).catch((function(e){return console.log(e)}))},closeSuccessAlert:function(){this.success=!1,this.message=""}},watch:{notifs:function(){this.$_.size(this.$nuxt.notifs)>0&&this.getHistoryProgramm(this.paging.current,{},!1)}}},d=c,h=n(8),component=Object(h.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-wrap mt-4"},[t("div",{class:"".concat(e.$nuxt.showSidebar?"w-full mb-12 px-6":"max-w-full")},[t("cards-card-table",{attrs:{color:"light",title:"HISTORY PROGRAMM",types:"data-history",queryType:"DATA_HISTORY",queryMiddle:"data-history",headers:e.headers,columns:e.items,loading:e.loading,success:e.success,paging:e.paging,messageAlert:e.message_success},on:{"filter-data":e.handleFilterBarang,"close-alert":e.closeSuccessAlert,"deleted-data":e.deleteHistory}}),e._v(" "),t("div",{staticClass:"mt-6 -mb-2"},[t("div",{staticClass:"flex justify-center items-center"},[t("molecules-pagination",{attrs:{links:e.links,paging:e.paging},on:{"fetch-data":e.getHistoryProgramm}})],1)])],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CardsCardTable:n(709).default,MoleculesPagination:n(675).default})}}]);